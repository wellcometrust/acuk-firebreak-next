{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport fetch from 'isomorphic-unfetch';\nimport Layout from '../../layouts/default';\nimport TitleBanner from '../../components/TitleBanner';\nimport ImageBanner from '../../components/ImageBanner';\nimport JobListings from '../../components/JobListings';\n\nconst JobsIndex = ({\n  jobs,\n  title,\n  body,\n  image\n}) => __jsx(Layout, null, __jsx(TitleBanner, {\n  title: title\n}), __jsx(ImageBanner, image), __jsx(JobListings, {\n  jobs: jobs\n}));\n\nJobsIndex.getInitialProps = async () => {\n  // fetch page data\n  const pageResponse = await fetch(`${process.env.API_ROOT}/page/d531df90-0fb9-4475-bdc6-8222b22924c7`);\n  const {\n    data: page\n  } = await pageResponse.json();\n  const {\n    title,\n    body\n  } = page.attributes; // fetch `jobs` content-types\n\n  const jobsResponse = await fetch(`${process.env.API_ROOT}/jobs/`);\n  const {\n    data: jobs\n  } = await jobsResponse.json(); // fetch `field_image`\n\n  const {\n    field_image\n  } = page.relationships;\n  const imageResponse = await fetch(`${field_image.links.related.href}`);\n  const {\n    data: image\n  } = await imageResponse.json();\n  return {\n    title,\n    body,\n    image: {\n      path: image.attributes.uri.url,\n      alt: field_image.data.meta.alt\n    },\n    jobs\n  };\n};\n\nexport default JobsIndex;","map":null,"metadata":{},"sourceType":"module"}