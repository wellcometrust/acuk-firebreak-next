{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport fetch from 'isomorphic-unfetch';\nimport Layout from '../../layouts/default';\nimport TitleBanner from '../../components/TitleBanner';\n\nconst Job = ({\n  title,\n  sections\n}) => __jsx(Layout, null, __jsx(TitleBanner, {\n  title: title\n}), sections.map(({\n  attributes\n}, key) => __jsx(\"section\", {\n  key: key\n}, __jsx(\"h2\", null, attributes.field_title), __jsx(\"div\", {\n  dangerouslySetInnerHTML: {\n    __html: attributes.field_body.processed\n  }\n}))));\n\nJob.getInitialProps = async context => {\n  const {\n    id\n  } = context.query; // fetch `Job`\n\n  const response = await fetch(`${process.env.API_ROOT}/jobs/${id}`);\n  const {\n    data\n  } = await response.json();\n  const {\n    title,\n    field_job_section\n  } = data.attributes; // fetch `sections` from field_collection endpoint\n\n  const sectionsResponse = await fetch(`http://127.0.0.1:8888/jsonapi/field_collection_item/field_job_section/`);\n  const {\n    data: sections\n  } = await sectionsResponse.json();\n  return {\n    title,\n    sections\n  };\n};\n\nexport default Job;","map":null,"metadata":{},"sourceType":"module"}